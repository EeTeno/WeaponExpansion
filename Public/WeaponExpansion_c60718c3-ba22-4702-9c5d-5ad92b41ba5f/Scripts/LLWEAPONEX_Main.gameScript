#INCLUDE LLWEAPONEX_Statuses
#INCLUDE LLWEAPONEX_ThrowingWeapons
#INCLUDE LLWEAPONEX_Runeblades
#INCLUDE LLWEAPONEX_Grimoires
#INCLUDE LLWEAPONEX_Greatbows
#INCLUDE LLWEAPONEX_Items
INIT
	USING LLWEAPONEX_Statuses
	USING LLWEAPONEX_ThrowingWeapons
	USING LLWEAPONEX_Runeblades
	USING LLWEAPONEX_Grimoires
	USING LLWEAPONEX_Greatbows
	USING LLWEAPONEX_Items
EVENTS

EVENT LLWEAPONEX_Debug_ReviveRevenantTest
VARS
	CHARACTER:_Character
ON
	OnCharacterItemEvent(_Character, _, "LLWEAPONEX_Debug_ReviveRevenantTest")
ACTIONS
IF "c1"
	CharacterIsDead(S_Lizards_Hero_Male_RevenantTest_c4017ac3-f894-4148-9791-7b942088123f, 1)
THEN
	CharacterResurrect(S_Lizards_Hero_Male_RevenantTest_c4017ac3-f894-4148-9791-7b942088123f, 50)
ENDIF
	CharacterApplyStatus(S_Lizards_Hero_Male_RevenantTest_c4017ac3-f894-4148-9791-7b942088123f, LLWEAPONEX_DEATH_SENTENCE, -1, 1, _Character)
	
EVENT LLWEAPONEX_Debug_AtmoTest_Day
ON
	OnItemEvent(_, "LLWEAPONEX_Debug_SetAtmosphereToDay")
ACTIONS
	SetAtmosphere("85e62279-a4fd-4573-a287-062f46c96fe1", "57690f2e-466a-4d38-a071-74b109cedef4")
	
EVENT LLWEAPONEX_Debug_AtmoTest_Night
ON
	OnItemEvent(_, "LLWEAPONEX_Debug_SetAtmosphereToNight")
ACTIONS
	SetAtmosphere("85e62279-a4fd-4573-a287-062f46c96fe1", "f2e42e22-7126-47cc-9ded-5770cc83507c")
	
EVENT LLWEAPONEX_Debug_MagicEffect
VARS
	CHARACTER:_Character
ON
	OnCharacterStartAttackObject(_,_,_,_Character)
	OnCharacterStartAttackPosition(_,_,_Character)
ACTIONS
IF "c1"
	CharacterHasStatus(_Character, LLWEAPONEX_GRIMOIRE_WIND_ACTIVE)
THEN
	CharacterPlayEffect(_Character, "RS3_FX_Skills_Voodoo_Cast_Aoe_Air_Hand_01", "Dummy_R_HandFX")
	//RS3_FX_Skills_Totem_Cast_Target_Totem_Air_Hand_01
ENDIF

EVENT LLWEAPONEX_Debug_DestroyLoopFX
VARS
	CHARACTER:_Character
	INT:_FX
	INT64:_FXHandle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_DestroyLoopFX")
ACTIONS
IF "c1"
	GetVar(_FX, _Character, "LLWEAPONEX_FXHandleToDestroy")
THEN
	Cast(_FXHandle, _FX)
	StopLoopEffect(_FXHandle, 1)
ENDIF
	SetVar(_Character, "LLWEAPONEX_FXHandleToDestroy", _FXHandle)	

/*
EVENT LLWEAPONEX_Rod_Equipped
VARS
	CHARACTER:_Character
	ITEM:_Item
	ITEM:_ShieldItem
	SKILL:_Skill
	STRING:_String
	FIXEDSTRING:_StringF
ON
	OnItemEquipped(_Character, _Item)
ACTIONS
	StatusText(_Character, "Item equipped")
IF "c1"
	ItemGetSkillId(_Item, _Skill)
THEN
	Print(_String, "Item skill: [1]", _Skill)
	Cast(_StringF, _String)
	StatusText(_Character, _StringF)
ENDIF

IF "c1&(c2|c3|c4|c5|c6)"
	ItemGetSkillId(_Item, _Skill)
	IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Air)
	IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Chaos)
	IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Fire)
	IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Poison)
	IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Water)
THEN
	StatusText(_Character, "Rod equipped")
	IF "c1&c2"
		CharacterGetEquippedItem(_Character, "Shield", _ShieldItem)
		IsEqual(_ShieldItem, _Item)
	THEN
		StatusText(_Character, "Rod in offhand")
		IF "c1"
			IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Air)
		THEN
			SetVar(_Item, "LLWEAPONEX_RodSkill", STRING:"Projectile_LLWEAPONEX_ShootRod_Air")
			SetVar(_Item, "LLWEAPONEX_RodSkill_Offhand", STRING:"Projectile_LLWEAPONEX_ShootRod_Air_Offhand")
		ELIF "c1"
			IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Chaos)
		THEN
			SetVar(_Item, "LLWEAPONEX_RodSkill", STRING:"Projectile_LLWEAPONEX_ShootRod_Chaos")
			SetVar(_Item, "LLWEAPONEX_RodSkill_Offhand", STRING:"Projectile_LLWEAPONEX_ShootRod_Chaos_Offhand")
		ELIF "c1"
			IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Fire)
		THEN
			SetVar(_Item, "LLWEAPONEX_RodSkill", STRING:"Projectile_LLWEAPONEX_ShootRod_Fire")
			SetVar(_Item, "LLWEAPONEX_RodSkill_Offhand", STRING:"Projectile_LLWEAPONEX_ShootRod_Fire_Offhand")
		ELIF "c1"
			IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Poison)
		THEN
			SetVar(_Item, "LLWEAPONEX_RodSkill", STRING:"Projectile_LLWEAPONEX_ShootRod_Poison")
			SetVar(_Item, "LLWEAPONEX_RodSkill_Offhand", STRING:"Projectile_LLWEAPONEX_ShootRod_Poison_Offhand")
		ELIF "c1"
			IsEqual(_Skill, Projectile_LLWEAPONEX_ShootRod_Water)
		THEN
			SetVar(_Item, "LLWEAPONEX_RodSkill", STRING:"Projectile_LLWEAPONEX_ShootRod_Water")
			SetVar(_Item, "LLWEAPONEX_RodSkill_Offhand", STRING:"Projectile_LLWEAPONEX_ShootRod_Water_Offhand")
		ENDIF
		CharacterItemEvent(_Character, _Item, "LLWEAPONEX_Events_RodEquippedInOffhand")
	ENDIF
ENDIF
*/

EVENT LLWEAPONEX_WeaponMastery_ResetCharges
VARS
	CHARACTER:_Character
	ITEM:_Item
ON
	OnCharacterItemEvent(_Character, _Item, "LLWEAPONEX_WeaponMastery_MasteryLevelUp")
ACTIONS
	//ItemResetChargesToInitial(_Item)