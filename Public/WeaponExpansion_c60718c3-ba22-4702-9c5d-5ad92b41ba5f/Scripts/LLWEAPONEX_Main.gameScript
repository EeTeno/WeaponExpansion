#INCLUDE LLWEAPONEX_Statuses
#INCLUDE LLWEAPONEX_ThrowingWeapons
#INCLUDE LLWEAPONEX_Runeblades
#INCLUDE LLWEAPONEX_Grimoires
INIT
	USING LLWEAPONEX_Statuses
	USING LLWEAPONEX_ThrowingWeapons
	USING LLWEAPONEX_Runeblades
	USING LLWEAPONEX_Grimoires
EVENTS

EVENT LLWEAPONEX_Debug_ReviveRevenantTest
VARS
	CHARACTER:_Character
ON
	OnCharacterItemEvent(_Character, _, "LLWEAPONEX_Debug_ReviveRevenantTest")
ACTIONS
IF "c1"
	CharacterIsDead(S_Lizards_Hero_Male_RevenantTest_c4017ac3-f894-4148-9791-7b942088123f, 1)
THEN
	CharacterResurrect(S_Lizards_Hero_Male_RevenantTest_c4017ac3-f894-4148-9791-7b942088123f, 50)
ENDIF
	CharacterApplyStatus(S_Lizards_Hero_Male_RevenantTest_c4017ac3-f894-4148-9791-7b942088123f, LLWEAPONEX_DEATH_SENTENCE, -1, 1, _Character)
	
EVENT LLWEAPONEX_Debug_AtmoTest_Day
ON
	OnItemEvent(_, "LLWEAPONEX_Debug_SetAtmosphereToDay")
ACTIONS
	SetAtmosphere("85e62279-a4fd-4573-a287-062f46c96fe1", "57690f2e-466a-4d38-a071-74b109cedef4")
	
EVENT LLWEAPONEX_Debug_AtmoTest_Night
ON
	OnItemEvent(_, "LLWEAPONEX_Debug_SetAtmosphereToNight")
ACTIONS
	SetAtmosphere("85e62279-a4fd-4573-a287-062f46c96fe1", "f2e42e22-7126-47cc-9ded-5770cc83507c")
	
EVENT LLWEAPONEX_Debug_MagicEffect
VARS
	CHARACTER:_Character
ON
	OnCharacterStartAttackObject(_,_,_,_Character)
	OnCharacterStartAttackPosition(_,_,_Character)
ACTIONS
IF "c1"
	CharacterHasStatus(_Character, LLWEAPONEX_GRIMOIRE_WIND_ACTIVE)
THEN
	CharacterPlayEffect(_Character, "RS3_FX_Skills_Voodoo_Cast_Aoe_Air_Hand_01", "Dummy_R_HandFX")
	//RS3_FX_Skills_Totem_Cast_Target_Totem_Air_Hand_01
ENDIF

EVENT LLWEAPONEX_Debug_DestroyLoopFX
VARS
	CHARACTER:_Character
	INT:_FX
	INT64:_FXHandle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_DestroyLoopFX")
ACTIONS
IF "c1"
	GetVar(_FX, _Character, "LLWEAPONEX_FXHandleToDestroy")
THEN
	Cast(_FXHandle, _FX)
	StopLoopEffect(_FXHandle, 1)
ENDIF
	SetVar(_Character, "LLWEAPONEX_FXHandleToDestroy", _FXHandle)

EVENT LLWEAPONEX_Grimoire_PlaySheathedFX
VARS
	CHARACTER:_Character
	STRING:_FX
	FIXEDSTRING:_Bone
	INT64:_Handle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_Grimoire_PlaySheathedFX")
ACTIONS
IF "c1&c2"
	GetVar(_FX, _Character, "LLWEAPONEX_Grimoire_NextLoopFX")
	GetVar(_Bone, _Character, "LLWEAPONEX_Grimoire_NextBone")
THEN
	CharacterPlayLoopEffect(_Handle, _Character, _FX, _Bone)
	SetVar(_Character, "LLWEAPONEX_Grimoire_SheathedFXHandle", _Handle)
	IF "c1"
		GetVar(_Handle, _Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle")
	THEN
		StopLoopEffect(_Handle, 1)
		SetVar(_Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle", INT64:null)
	ENDIF
ENDIF

EVENT LLWEAPONEX_Grimoire_PlayUnsheathedFX
VARS
	CHARACTER:_Character
	STRING:_FX
	FIXEDSTRING:_Bone
	INT64:_Handle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_Grimoire_PlayUnsheathedFX")
ACTIONS
IF "c1&c2"
	GetVar(_FX, _Character, "LLWEAPONEX_Grimoire_NextLoopFX")
	GetVar(_Bone, _Character, "LLWEAPONEX_Grimoire_NextBone")
THEN
	CharacterPlayLoopEffect(_Handle, _Character, _FX, _Bone)
	SetVar(_Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle", _Handle)
	/*
	IF "c1"
		GetVar(_Handle, _Character, "LLWEAPONEX_Grimoire_SheathedFXHandle")
	THEN
		StopLoopEffect(_Handle, 1)
		SetVar(_Character, "LLWEAPONEX_Grimoire_SheathedFXHandle", INT64:null)
	ENDIF
	*/
ENDIF

EVENT LLWEAPONEX_Grimoire_StopUnsheathedFX
VARS
	CHARACTER:_Character
	STRING:_FX
	INT64:_Handle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_Grimoire_StopUnsheathedFX")
ACTIONS
IF "c1"
	GetVar(_Handle, _Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle")
THEN
	StopLoopEffect(_Handle, 1)
	SetVar(_Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle", INT64:null)
ENDIF

EVENT LLWEAPONEX_Grimoire_StopSheathedFX
VARS
	CHARACTER:_Character
	STRING:_FX
	INT64:_Handle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_Grimoire_StopSheathedFX")
ACTIONS
IF "c1"
	GetVar(_Handle, _Character, "LLWEAPONEX_Grimoire_SheathedFXHandle")
THEN
	StopLoopEffect(_Handle, 1)
	SetVar(_Character, "LLWEAPONEX_Grimoire_SheathedFXHandle", INT64:null)
ENDIF

EVENT LLWEAPONEX_Grimoire_StopEquippedFX
VARS
	CHARACTER:_Character
	INT64:_Handle
ON
	OnCharacterEvent(_Character, "LLWEAPONEX_Grimoire_StopEquippedFX")
ACTIONS
IF "c1"
	GetVar(_Handle, _Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle")
THEN
	StopLoopEffect(_Handle, 1)
	SetVar(_Character, "LLWEAPONEX_Grimoire_UnsheathedFXHandle", INT64:null)
ENDIF
IF "c1"
	GetVar(_Handle, _Character, "LLWEAPONEX_Grimoire_SheathedFXHandle")
THEN
	StopLoopEffect(_Handle, 1)
	SetVar(_Character, "LLWEAPONEX_Grimoire_SheathedFXHandle", INT64:null)
ENDIF