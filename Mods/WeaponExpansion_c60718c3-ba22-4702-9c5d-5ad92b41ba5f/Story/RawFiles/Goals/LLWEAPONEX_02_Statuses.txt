Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
CharacterStatusAttempt(_Character, "LLWEAPONEX_RANDOM_SURFACE_SMALL", _)
AND
GetStatusTurns(_Character, "LLWEAPONEX_RANDOM_SURFACE_SMALL", _Turns)
AND
_Turns > 0
AND
GetPosition(_Character, _x, _y, _z)
AND
Real(_Turns, _TurnsR)
AND
RealProduct(_TurnsR, 6.0, _Lifetime)
AND
LeaderLib_Array_QRY_Random("LLWEAPONEX_ChaosSurfaces")
AND
DB_LeaderLib_Array_Temp_RandomResult("LLWEAPONEX_ChaosSurfaces", _Index, _Surface)
THEN
NOT DB_LeaderLib_Array_Temp_RandomResult("LLWEAPONEX_ChaosSurfaces", _Index, _Surface);
CreateSurfaceAtPosition(_x, _y, _z, _Surface, 1.0, _Lifetime);
RemoveStatus(_Character, "LLWEAPONEX_RANDOM_SURFACE_SMALL");

IF
CharacterStatusAttempt(_Character, "LLWEAPONEX_RANDOM_SURFACE_SMALL", _)
AND
NOT GetStatusTurns(_Character, "LLWEAPONEX_RANDOM_SURFACE_SMALL", _)
AND
GetPosition(_Character, _x, _y, _z)
AND
LeaderLib_Array_QRY_Random("LLWEAPONEX_ChaosSurfaces")
AND
DB_LeaderLib_Array_Temp_RandomResult("LLWEAPONEX_ChaosSurfaces", _Index, _Surface)
THEN
NOT DB_LeaderLib_Array_Temp_RandomResult("LLWEAPONEX_ChaosSurfaces", _Index, _Surface);
CreateSurfaceAtPosition(_x, _y, _z, _Surface, 1.0, 12.0);
RemoveStatus(_Character, "LLWEAPONEX_RANDOM_SURFACE_SMALL");

IF
CharacterStatusRemoved(_Character, "HIT", _)
AND
HasActiveStatus(_Character, "LLWEAPONEX_CHAOS_POWER", 1)
AND
LeaderLib_Array_QRY_Random("LLWEAPONEX_ChaosSurfaces")
AND
DB_LeaderLib_Array_Temp_RandomResult("LLWEAPONEX_ChaosSurfaces", _Index, _Surface)
THEN
NOT DB_LeaderLib_Array_Temp_RandomResult("LLWEAPONEX_ChaosSurfaces", _Index, _Surface);
CreateSurface(_Character, _Surface, 2.0, 12.0);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LaughingLeader_WeaponExpansion"
