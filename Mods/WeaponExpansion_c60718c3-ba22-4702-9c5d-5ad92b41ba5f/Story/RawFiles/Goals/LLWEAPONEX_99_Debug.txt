Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
RegionStarted("TestLevel_LL_WeaponExpansion")
THEN
GoalCompleted;

IF
GameStarted("TestLevel_LL_WeaponExpansion", _)
THEN
GoalCompleted;

IF
TextEventSet("llweap_beamtest")
AND
CharacterGetHostCharacter(_Host)
THEN
PlayBeamEffect(_Host, _Host, "RS3_FX_GP_Beams_Telekinesis_01", "Dummy_BackFX_L", "Dummy_FrontFX_L");

IF
GameStarted(_Level, _)
AND
IsGameLevel(_Level, 1)
AND
CharacterGetHostCharacter(_Host)
AND
CharacterGetReservedUserID(_Host, _ID)
AND
GetUserName(_ID, _UserName)
AND
_UserName == "LaughingLeader"
THEN
GlobalSetFlag("LLWEAPONEX_Debug_LeaderModeEngaged");

IF
StoryEvent((CHARACTERGUID)_Trader, "LeaderLib_Events_OnLeaderTradeSpawned")
AND
GlobalGetFlag("LLWEAPONEX_Debug_LeaderModeEngaged", 1)
AND
CharacterGetHostCharacter(_Host)
THEN
CharacterSetCustomTradeTreasure(_Trader, "LLWEAPONEX_CheatAllWeapons");
GenerateItems(_Host, _Trader);
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LaughingLeader_WeaponExpansion"
