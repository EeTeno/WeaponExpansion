Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
CharacterStatusAttempt(_Target, "LLWEAPONEX_KATANA_HIT", (CHARACTERGUID)_Source)
THEN
CharacterCharacterSetEvent(_Target, _Source, "LLWEAPONEX_OnKatanaHit");

IF
CharacterStatusApplied(_Target, "LLWEAPONEX_KATANA_FINISHER", (CHARACTERGUID)_Source)
THEN
DB_LLWEAPONEX_Katanas_ListenForTurnEnding(_Source, _Target);

PROC
LLWEAPONEX_WeaponMastery_OnMasteryDeactivated((CHARACTERGUID)_Source, "LLWEAPONEX_Katana")
AND
DB_LLWEAPONEX_Katanas_ListenForTurnEnding(_Source, _Target)
THEN
NOT DB_LLWEAPONEX_Katanas_ListenForTurnEnding(_Source, _Target);

PROC
LLWEAPONEX_WeaponMastery_OnWeaponEquipped((CHARACTERGUID)_Player, (ITEMGUID)_Item, "LLWEAPONEX_Katana")
AND
IsTagged(_Item, "LLWEAPONEX_TwoHanded", 1)
THEN
CharacterSetAnimationSetOverride(_Player, "LLWEAPONEX_Override1");

PROC
LLWEAPONEX_WeaponMastery_OnWeaponUnEquipped((CHARACTERGUID)_Player, (ITEMGUID)_Item, "LLWEAPONEX_Katana")
AND
IsTagged(_Item, "LLWEAPONEX_TwoHanded", 1)
THEN
CharacterSetAnimationSetOverride(_Player, "");

PROC
LLWEAPONEX_WeaponMastery_OnWeaponEquipped((CHARACTERGUID)_Player, (ITEMGUID)_Item, "LLWEAPONEX_Rapier")
AND
IsTagged(_Item, "LLWEAPONEX_TwoHanded", 0)
THEN
CharacterSetAnimationSetOverride(_Player, "LLWEAPONEX_Override1");

PROC
LLWEAPONEX_WeaponMastery_OnWeaponUnEquipped((CHARACTERGUID)_Player, (ITEMGUID)_Item, "LLWEAPONEX_Rapier")
AND
IsTagged(_Item, "LLWEAPONEX_TwoHanded", 0)
THEN
CharacterSetAnimationSetOverride(_Player, "");
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LLWEAPONEX_00_PostCC"
