Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
StoryEvent(_, "LeaderLib_Initialized")
AND
NOT DB_LLWEAPONEX_RegisteredLeaderLibSettings(_)
THEN
DB_LLWEAPONEX_RegisteredLeaderLibSettings(1);
LLWEAPONEX_LeaderLib_InitSettings();
LLWEAPONEX_LeaderLib_RegisterToggleScripts();
LLWEAPONEX_LeaderLib_InitHelperSettings();
LLWEAPONEX_LeaderLib_InitTraderSettings();
LLWEAPONEX_LeaderLib_InitDeltamods();
LLWEAPONEX_LeaderLib_InitItemGrowth();
LLWEAPONEX_LeaderLib_AddBlockedSkills();

//REGION TOGGLE_SCRIPTS
PROC
LLWEAPONEX_LeaderLib_RegisterToggleScripts()
THEN
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_00_MasteryActive", "LLWEAPONEX_MasterySystemActive");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_10_DemonGauntlet", "LLWEAPONEX_DemonGauntletEquipped");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_08_Quivers", "LLWEAPONEX_QuiverEquipped");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_10_OniGauntlet", "LLWEAPONEX_OniGauntletEquipped");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_10_Muramasa", "LLWEAPONEX_MuramasaEquipped");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_10_DemolitionBackpack", "LLWEAPONEX_DemolitionBackpackEquipped");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_11_Blunderbuss", "LLWEAPONEX_BlunderbussEquipped");
LeaderLib_ToggleScripts_Register_Script("LLWEAPONEX_80_TS_69_BlockHealing", "LLWEAPONEX_BlockHealingActive");
//END_REGION

//REGION PRESETS_MISC
PROC
LLWEAPONEX_LeaderLib_InitSettings()
THEN
LeaderLib_Register_ModMenu("LaughingLeader.WeaponExpansion", "[Weapon Expansion] Settings", "LLWEAPONEX_SettingsMenu", "WeaponExpansion", "LaughingLeader");
LeaderLib_ToggleScripts_EnableScript("LeaderLib_TS_GrowthEvents_Item_Enabled", "WeaponExpansion");

LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_Assassin", "Assassin [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_Blademaster", "Blademaster [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_ChaosWeaver", "Chaos Weaver [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_DragonSlayer", "Dragon Slayer [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_DualShields", "Shieldmaster [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_Fencer", "Fencer [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_MonkWoodenQuarterstaff", "Monk (Wooden Quarterstaff) [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_MonkMetalQuarterstaff", "Monk (Metal Quarterstaff) [Weapon Expansion]", "WeaponExpansion_IsActive");
LeaderLib_PresetMenu_RegisterPreset("LLWEAPONEX_RunicKnight", "Runic Knight [Weapon Expansion]", "WeaponExpansion_IsActive");

PROC
LLWEAPONEX_LeaderLib_InitHelperSettings()
THEN
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Air_72a7d3aa-02d7-4c9b-a565-d94c8a5664b0");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Corrosive_598b8cb5-7f76-4c50-a609-2a3cd0aa0415");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Earth_8a29169a-e73d-4878-9769-8b4555140fb0");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Fire_1fe1e11c-2e54-4104-b80a-b6fa0b4b8e99");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Normal_baf9826a-abe8-4bc8-8c56-b68b5611c223");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Poison_c3f61b7d-5183-4664-9773-0b630374b7c9");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Shadow_7dcb9e1f-b807-4321-8408-c66f833ae73c");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_Water_40af98d5-3584-40cc-8c9f-e3a49564f365");
LeaderLib_Helper_Runes_Register_RuneTemplate("WeaponExpansion.HandCrossbowBolt", "LOOT_Rune_LLWEAPONEX_Crossbow_Bolt_WeaponProxy_8c1da19c-02e9-4a6c-b253-1b3e31b7740f");
LeaderLib_Helper_Runes_Register_TagRestriction("WeaponExpansion.HandCrossbowBolt", "LLWEAPONEX_HandCrossbow");

LeaderLib_ToggleScripts_EnableScript("LeaderLib_TS_RuneBlockingEnabled", "WeaponExpansion");

PROC
LeaderLib_Helper_Runes_RuneBlocked((CHARACTERGUID)_Player, (ITEMGUID)_Item, "WeaponExpansion.HandCrossbowBolt", (STRING)_RuneTemplate)
THEN
ShowNotification(_Player, "LLWEAPONEX_Notifications_BoltInsertedInNonCrossbow");
//END_REGION

//REGION TRADER
PROC
LLWEAPONEX_LeaderLib_InitTraderSettings()
THEN
LeaderLib_Trader_Register_Position("LeaderLib.LeaderTrader", "TestLevel_LL_WeaponExpansion", 12.0, 0.0, 8.0);
LeaderLib_Trader_Register_StartingGold("LeaderLib.LeaderTrader", "TestLevel_LL_WeaponExpansion", 9999);
//END_REGION
//Copy Blacklist
//DB_LeaderLib_Helper_EquipmentCopyBlacklist_Tags("WeaponeExpansion.CopyBlacklist", "LLWEAPONEX_Grimoire");

//REGION DELTAMODS
PROC
LLWEAPONEX_LeaderLib_InitDeltamods()
THEN
//Random Deltamods
LeaderLib_Deltamods_Register_Group("WeaponExpansion.CombatShields", 0);
//LeaderLib_Deltamods_Register_Template("WeaponExpansion.CombatShields", "WPN_LLWEAPONEX_CombatShield_Blackring_A_ec353f1e-c1ca-46d1-83ef-e9f4fea14475", 0);
//LeaderLib_Deltamods_Register_Template("WeaponExpansion.CombatShields", "WPN_LLWEAPONEX_CombatShield_Lizards_C_067f48be-857d-43a8-bd0a-add59f025843", 0);

//Group, Rarity, Deltamod, Chance/999, MinLevel, MaxLevel
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "NonEpic", "Boost_LLWEAPONEX_Weapon_Primary_Constitution_CombatShield", 600, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Exceptional", "Boost_LLWEAPONEX_Weapon_Primary_Constitution_CombatShield_Medium", 600, 10);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Legendary", "Boost_LLWEAPONEX_Weapon_Primary_Constitution_CombatShield_Large", 600, 16);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Normal", "Boost_LLWEAPONEX_Weapon_Ability_OneHanded_CombatShield", 100, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Normal", "Boost_LLWEAPONEX_Weapon_Ability_Perserverance_CombatShield", 100, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Normal", "Boost_LLWEAPONEX_Weapon_Ability_PainReflection_CombatShield", 100, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Normal", "Boost_LLWEAPONEX_Weapon_Ability_WarriorLore_CombatShield", 100, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "NonEpic", "Boost_LLWEAPONEX_Weapon_Skill_CripplingBlow_CombatShield", 450, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "NonLegendary", "Boost_LLWEAPONEX_Weapon_Skill_GuardianAngel_CombatShield", 450, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Legendary", "Boost_LLWEAPONEX_Weapon_Skill_DeflectiveBarrier_CombatShield", 100, 10);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Legendary", "Boost_LLWEAPONEX_Weapon_Skill_ThickOfTheFight_CombatShield", 550, 1);

LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "NonEpic", "Boost_LLWEAPONEX_Weapon_Status_Set_Crippled_CombatShield_Rare", 100, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Exceptional", "Boost_LLWEAPONEX_Weapon_Status_Set_Crippled_CombatShield_Rare", 299, 1);
LeaderLib_Deltamods_Add_Chance("WeaponExpansion.CombatShields", "Legendary", "Boost_LLWEAPONEX_Weapon_Status_Set_Crippled_CombatShield_Rare", 499, 1);

LeaderLib_Deltamods_Register_MaxGuaranteedForGroup("WeaponExpansion.CombatShields", 2);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "NonEpic", "Boost_Weapon_Secondary_Vitality", 1);
//LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "NonEpic", "Boost_Weapon_LifeSteal", 1); // LifeSteal doesn't show up currently
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "NonEpic", "Boost_LLWEAPONEX_Weapon_Damage_ArmourPiercing_Small_CombatShield", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "NonEpic", "Boost_Weapon_Ability_Telekinesis_Wand", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Exceptional", "Boost_Weapon_Secondary_Vitality_Normal", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Exceptional", "Boost_Weapon_Secondary_CriticalChance", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Exceptional", "Boost_Weapon_Ability_Necromancy_Wand", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Exceptional", "Boost_Weapon_Damage_ArmourPiercing", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Legendary", "Boost_Weapon_Secondary_CriticalModifier", 1);
//LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Legendary", "Boost_Weapon_LifeSteal_Large", 1);
LeaderLib_Deltamods_Add_List("WeaponExpansion.CombatShields", "Legendary", "Boost_Weapon_Damage_ArmourPiercing_Medium", 1);

LeaderLib_Helper_Blacklist_TagFromCopying("LaughingLeader_WeaponExpansion", "LLWEAPONEX_Grimoire");
LeaderLib_Helper_Blacklist_TagFromCopying("LaughingLeader_WeaponExpansion", "LLWEAPONEX_CombatShield");

PROC
LLWEAPONEX_LeaderLib_InitItemGrowth()
THEN
//Unique Weapon Deltamods
//Katanas
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Katanas.Fire", "WPN_UNIQUE_LLWEAPONEX_Katana_Dagger_Runeblade_Fire_1H_A_25726991-6bc1-45fb-a00b-d3bf855cd0d1");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Fire", 6, "Boost_Weapon_Ability_FireSpecialist_Wand");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Fire", 8, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Fire", 10, "Boost_Weapon_Primary_Intelligence_PrimaryAsLarge");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Fire", 12, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Fire", 14, "Boost_Weapon_Damage_Fire_Small_Knife");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Fire", 15, "Boost_Weapon_EmptyRuneSlot");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Katanas.Muramasa", "WPN_UNIQUE_LLWEAPONEX_Katana_Dagger_Sword_2H_Muramasa_4be8ec78-17ed-4f61-b3d8-96c260d1c80a");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Muramasa", 4, "Boost_Weapon_Skill_SerratedEdge");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Muramasa", 7, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Muramasa", 9, "Boost_Weapon_Ability_RogueLore_Knife");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Muramasa", 11, "Boost_Weapon_Status_Set_Bleeding_Dagger");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Muramasa", 12, "Boost_Weapon_EmptyRuneSlot");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Katanas.Raizan", "WPN_UNIQUE_LLWEAPONEX_Katana_Dagger_Sword_2H_Raizan_1_b1320940-1afb-479a-b510-875afdb12d41");
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Katanas.Raizan", "WPN_UNIQUE_LLWEAPONEX_Katana_Dagger_Sword_2H_Raizan_2_e03787b9-acac-4563-953e-a1149a6ebec1");
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Katanas.Raizan", "WPN_UNIQUE_LLWEAPONEX_Katana_Dagger_Sword_2H_Raizan_3_fa2345b0-68f5-443f-8665-d2a5991bbf29");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Raizan", 4, "Boost_Weapon_Ability_AirSpecialist_Wand");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Raizan", 6, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Raizan", 7, "Boost_LLWEAPONEX_Weapon_Skill_BlinkStrike");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Raizan", 9, "Boost_Weapon_Ability_RogueLore_Knife");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Katanas.Raizan", 14, "Boost_Weapon_EmptyRuneSlot");

//Greatbows
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Greatbow.Lightning", "WPN_UNIQUE_LLWEAPONEX_Greatbow_Lightning_Bow_2H_A_7efec0e0-1c2e-4f0d-9ec5-e3a1f40c97b8");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 2, "Boost_Weapon_Ability_AirSpecialist_Wand");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 4, "Boost_Weapon_Primary_Intelligence_PrimaryAsLarge");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 6, "Boost_Weapon_Secondary_Dodge_TwoHanded");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 8, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 10, "Boost_Weapon_Damage_Air_Medium_Bow");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 12, "Boost_Weapon_Secondary_CriticalChance_TwoHanded");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 14, "Boost_Weapon_Status_Set_Muted");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Greatbow.Lightning", 15, "Boost_Weapon_EmptyRuneSlot");

//Beholder
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Swords.Beholder", "WPN_UNIQUE_LLWEAPONEX_Sword_2H_Beholder_A_1cc2baa1-cd58-40a3-8b53-89ef2e081616");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 4, "Boost_Weapon_Ability_WarriorLore_Sword");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 6, "Boost_Weapon_LifeSteal_Large_TwoHanded");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 7, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 10, "Boost_Weapon_Cleave_TwoHanded_Large");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 12, "Boost_Weapon_Secondary_CriticalChance_TwoHanded");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 14, "Boost_Weapon_Status_Set_Acid_TwoHanded");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Swords.Beholder", 15, "Boost_Weapon_EmptyRuneSlot");

//Blunderbuss
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Guns.Blunderbuss_A", "WPN_UNIQUE_LLWEAPONEX_Blunderbuss_2H_A_507801c0-4c6b-4b39-9aed-13fcd0962dd9");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 2, "Boost_Weapon_LLWEAPONEX_Blunderbuss_Skills_Tier1");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 5, "Boost_Weapon_LLWEAPONEX_Blunderbuss_Skills_Tier2");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 7, "Boost_Weapon_Ability_Ranged_Crossbow");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 9, "Boost_Weapon_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 12, "Boost_Weapon_Damage_Fire_Large_Crossbow");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 14, "Boost_Weapon_Ability_RangerLore_Crossbow");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Guns.Blunderbuss_A", 15, "Boost_Weapon_EmptyRuneSlot");
//LeaderLib_Growth_Items_Register_Transformation("WeaponExpansion.Guns.Blunderbuss_A", 5, "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_2_6a811339-a28f-44a6-980b-0289cc45cffa", "LLWEAPONEX_FrostDyne_Form2");

//Rapiers
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Rapier.Runeblade.Water", "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_d82bc239-4782-484c-88ab-e1fa571c9f6a");
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Rapier.Runeblade.Water2", "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_2_6a811339-a28f-44a6-980b-0289cc45cffa");
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Rapier.Runeblade.Water3", "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_3_c715d004-5d66-4301-8360-2c6c2e25f678");

LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 2, "Boost_Weapon_Ability_WaterSpecialist_Wand");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 3, "Boost_LLWEAPONEX_Weapon_Skill_GlobalCooling");
LeaderLib_Growth_Items_Register_Transformation("WeaponExpansion.Rapier.Runeblade.Water", 5, "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_2_6a811339-a28f-44a6-980b-0289cc45cffa", "LLWEAPONEX_FrostDyne_Form2");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 4, "Boost_LLWEAPONEX_Weapon_Unique_FrostDyne_Skills_Stage2");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 6, "Boost_LLWEAPONEX_Weapon_Rapier_Runeblade_Water_DamageBoost_A");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water2", 9, "Boost_LLWEAPONEX_Weapon_Skill_IceBreaker");
LeaderLib_Growth_Items_Register_Transformation("WeaponExpansion.Rapier.Runeblade.Water2", 12, "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_3_c715d004-5d66-4301-8360-2c6c2e25f678", "LLWEAPONEX_FrostDyne_Form3");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 10, "Boost_Weapon_EmptyRuneSlot");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 12, "Boost_Weapon_Primary_Intelligence_PrimaryAsLarge");
//LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Rapier.Runeblade.Water", 15, "Boost_Weapon_EmptyRuneSlot");

//Grimoires
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Grimoire.Death", "WPN_Shield_LLWEAPONEX_Unique_Grimoire_Death_3ef2d9c5-13e3-48a2-ab11-36f118ec7e67");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 3, "Boost_LLWEAPONEX_Grimoire_Ability_Necromancy_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 5, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 6, "Boost_LLWEAPONEX_Grimoire_Skill_BonePile");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 8, "Boost_LLWEAPONEX_Grimoire_Armor_All_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 8, "Boost_LLWEAPONEX_Grimoire_Ability_Necromancy_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 10, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 11, "Boost_LLWEAPONEX_Grimoire_Skill_GraspOfTheStarved");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 13, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Large");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Death", 16, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Grimoire.Mimicry", "WPN_UNIQUE_LLWEAPONEX_Grimoire_Mimicry_c9fcc947-4423-40b9-9629-ae2d1e156dfc");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 3, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 5, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 6, "Boost_LLWEAPONEX_Grimoire_Armor_Physical_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 8, "Boost_LLWEAPONEX_Grimoire_Armor_All_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 8, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 10, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 13, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Large");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Mimicry", 16, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Grimoire.Swap", "WPN_UNIQUE_LLWEAPONEX_Grimoire_Swap_f4227e7f-86df-498f-817c-fc00896eb040");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 3, "Boost_LLWEAPONEX_Grimoire_Skill_Swap_Tier1");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 5, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 6, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 8, "Boost_LLWEAPONEX_Grimoire_Armor_All_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 8, "Boost_LLWEAPONEX_Grimoire_Skill_Swap_Tier2");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 10, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 11, "Boost_LLWEAPONEX_Grimoire_Skill_Swap_Tier3");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 13, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Large");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Swap", 16, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Grimoire.Wind", "WPN_UNIQUE_LLWEAPONEX_Grimoire_Wind_c12e4d82-a6a5-4b3b-b29d-9e7810ff3216");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 3, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 4, "Boost_LLWEAPONEX_Grimoire_Ability_Air_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 5, "Boost_LLWEAPONEX_Grimoire_Armor_All_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 6, "Boost_LLWEAPONEX_Grimoire_Innate_DeflectProjectiles");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 7, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 10, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 11, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 12, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 14, "Boost_LLWEAPONEX_Grimoire_Ability_Air_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Wind", 16, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Grimoire.Fire", "WPN_UNIQUE_LLWEAPONEX_Grimoire_Fire_3d834205-a88b-459b-8e83-f44fbb166011");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 3, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 4, "Boost_LLWEAPONEX_Grimoire_Ability_Fire_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 5, "Boost_LLWEAPONEX_Grimoire_Armor_All_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 6, "Boost_LLWEAPONEX_Grimoire_Innate_DeflectProjectiles");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 7, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Small");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 10, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 11, "Boost_LLWEAPONEX_Grimoire_Attribute_Intelligence_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 12, "Boost_LLWEAPONEX_Grimoire_Armor_Magic_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 14, "Boost_LLWEAPONEX_Grimoire_Ability_Air_Medium");
LeaderLib_Growth_Items_Register_DeltaModByID("WeaponExpansion.Grimoire.Fire", 16, "Boost_LLWEAPONEX_Grimoire_EmptyRuneSlot");

//LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Misc.MagicMissileScepter", "WPN_UNIQUE_LLWEAPONEX_Wand_1H_MagicMissile_A_67ef34e7-5f50-4ef9-9e40-8c7c04884812");
//END_REGION

//REGION BLOCKED_SKILLS
PROC
LLWEAPONEX_LeaderLib_AddBlockedSkills()
THEN
DB_LeaderLib_BlockedSkill("Shout_LLWEAPONEX_Prepare_BalrinsAxe");
DB_LeaderLib_BlockedSkill("Projectile_LLWEAPONEX_Throw_UniqueAxe_A_Targeting");
DB_LeaderLib_BlockedSkill("Projectile_LLWEAPONEX_Throw_UniqueAxe_A");
DB_LeaderLib_BlockedSkill("Projectile_LLWEAPONEX_Throw_UniqueAxe_A_Offhand");

PROC
LLWEAPONEX_LeaderLib_AddBlockedSkills()
AND
DB_LLWEAPONEX_Rods_Skills(_Status, _MainhandSkill, _OffhandSkill)
THEN
DB_LeaderLib_BlockedSkill(_MainhandSkill);
DB_LeaderLib_BlockedSkill(_OffhandSkill);

PROC
LLWEAPONEX_LeaderLib_AddBlockedSkills()
AND
DB_LLWEAPONEX_Runeblades_TagToSkill(_Tag, _MainSkill, _DualWieldSkill, _Status)
THEN
DB_LeaderLib_BlockedSkill(_MainSkill);
DB_LeaderLib_BlockedSkill(_DualWieldSkill);


//Globally block mastery skills from being copied by the preset process
PROC
LLWEAPONEX_LeaderLib_AddBlockedSkills()
AND
DB_LLWEAPONEX_WeaponMastery_Skills(_WeaponType, _SkillID, _Skill)
THEN
DB_LeaderLib_BlockedSkill(_Skill);

PROC
LLWEAPONEX_LeaderLib_AddBlockedSkills()
AND
DB_LLWEAPONEX_WeaponMastery_RacialSkills(_WeaponType, _SkillID, _RaceTag, _IsFemale, _Skill)
THEN
DB_LeaderLib_BlockedSkill(_Skill);
//END_REGION

//REGION UPDATES
PROC
LeaderUpdater_ModUpdated("WeaponExpansion", "LaughingLeader", (STRING)_PastVersion, (STRING)_NewVersion)
AND
LeaderLib_StringExt_QRY_VersionIsLessThan(_PastVersion, 0, 9, 4, 16)
THEN
LLWEAPONEX_LeaderLib_RegisterToggleScripts();

PROC
LeaderUpdater_ModUpdated("WeaponExpansion", "LaughingLeader", (STRING)_PastVersion, (STRING)_NewVersion)
AND
LeaderLib_StringExt_QRY_VersionIsLessThan(_PastVersion, 0, 9, 4, 3)
THEN
LLWEAPONEX_LeaderLib_InitHelperSettings();

PROC
LeaderUpdater_ModUpdated("WeaponExpansion", "LaughingLeader", (STRING)_PastVersion, (STRING)_NewVersion)
AND
LeaderLib_StringExt_QRY_VersionIsLessThan(_PastVersion, 0, 9, 4, 1)
THEN
LLWEAPONEX_LeaderLib_InitItemGrowth();

PROC
LeaderUpdater_ModUpdated("WeaponExpansion", "LaughingLeader", (STRING)_PastVersion, (STRING)_NewVersion)
AND
LeaderLib_StringExt_QRY_VersionIsLessThan(_PastVersion, 0, 9, 3, 25)
THEN
LLWEAPONEX_LeaderLib_AddBlockedSkills();

PROC
LeaderUpdater_ModUpdated("WeaponExpansion", "LaughingLeader", (STRING)_PastVersion, (STRING)_NewVersion)
AND
LeaderLib_StringExt_QRY_VersionIsLessThan(_PastVersion, 0, 9, 3, 1)
THEN
LeaderLib_Growth_Items_Clear_ByEntriesID("WeaponExpansion.Rapier.Runeblade.Water");

LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Rapier.Runeblade.Water", "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_d82bc239-4782-484c-88ab-e1fa571c9f6a");
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Rapier.Runeblade.Water2", "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_2_6a811339-a28f-44a6-980b-0289cc45cffa");
LeaderLib_Growth_Items_Register_Template("WeaponExpansion.Rapier.Runeblade.Water3", "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_3_c715d004-5d66-4301-8360-2c6c2e25f678");

LeaderLib_Growth_Items_Register_DeltaMod("WeaponExpansion.Rapier.Runeblade.Water", 2, "Boost_Weapon_Ability_WaterSpecialist_Wand", "ID", "WeaponExpansion.Rapier.Runeblade.Water");
LeaderLib_Growth_Items_Register_DeltaMod("WeaponExpansion.Rapier.Runeblade.Water", 3, "Boost_LLWEAPONEX_Weapon_Skill_GlobalCooling", "ID", "WeaponExpansion.Rapier.Runeblade.Water");
LeaderLib_Growth_Items_Register_Transformation("WeaponExpansion.Rapier.Runeblade.Water", 5, "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_2_6a811339-a28f-44a6-980b-0289cc45cffa", "LLWEAPONEX_FrostDyne_Form2");
LeaderLib_Growth_Items_Register_DeltaMod("WeaponExpansion.Rapier.Runeblade.Water2", 9, "Boost_LLWEAPONEX_Weapon_Skill_IceBreaker", "ID", "WeaponExpansion.Rapier.Runeblade.Water");
LeaderLib_Growth_Items_Register_Transformation("WeaponExpansion.Rapier.Runeblade.Water2", 12, "WPN_UNIQUE_LLWEAPONEX_Rapier_Dagger_Runeblade_Water_1H_3_c715d004-5d66-4301-8360-2c6c2e25f678", "LLWEAPONEX_FrostDyne_Form3");

LeaderLib_Growth_Items_ResetItemsByID("WeaponExpansion.Rapier.Runeblade.Water");
//END_REGION

/*
LeaderLib_Treasure_Register_TreasureToTrader("LLWEAPONEX.LeaderTrader.TestWeapons", "LeaderLib.LeaderTrader");
LeaderLib_Requirements_Add_RegionRequirement("LLWEAPONEX.Debug.IsTestLevel", "TestLevel_LL_WeaponExpansion");
LeaderLib_Treasure_Register_TreasureTable("LLWEAPONEX.LeaderTrader.TestWeapons", "LLWEAPONEX_Debug_PriceCheck", "LLWEAPONEX.Debug.IsTestLevel", 1);
LeaderLib_Treasure_Register_TreasureTable("LLWEAPONEX.LeaderTrader.TestWeapons", "LLWEAPONEX_CheatQuarterstaffs", "LLWEAPONEX.Debug.IsTestLevel", 1);
LeaderLib_Treasure_Register_TreasureTable("LLWEAPONEX.LeaderTrader.TestWeapons", "ST_Grenades", "LLWEAPONEX.Debug.IsTestLevel", 1);
LeaderLib_Treasure_Register_TreasureTable("LLWEAPONEX.LeaderTrader.TestWeapons", "ST_WeaponNormal", "LLWEAPONEX.Debug.IsTestLevel", 1);
*/
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LaughingLeader_WeaponExpansion"
