Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION
IF
CharacterStartAttackPosition(_x, _y, _z, _, _Char)
AND
ObjectGetFlag(_Char, "LLWEAPONEX_SpellbookBattleBookEquipped", 1)
EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LLWEAPONEX_80_ToggledScripts"