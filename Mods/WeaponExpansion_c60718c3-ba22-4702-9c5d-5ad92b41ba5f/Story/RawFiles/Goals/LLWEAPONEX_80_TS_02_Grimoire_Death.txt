Version 1
SubGoalCombiner SGC_AND
INITSECTION
KBSECTION

IF
CharacterStatusRemoved(_DeadCharacter, "RESURRECTED", _)
AND
DB_LLWEAPONEX_Grimoire_Death_Temp_ClaimedSoul(_Ghost, _DeadCharacter, _Target)
THEN
NOT DB_LLWEAPONEX_Grimoire_Death_Temp_ClaimedSoul(_Ghost, _DeadCharacter, _Target);

//REGION DEATH_EVENTS
IF
CharacterPrecogDying(_Character)
AND
IsTagged(_Character, "LLWEAPONEX_DeathAura_ListenForDeath", 1)
AND
GetVarObject(_Character, "LLWEAPONEX_DeathAura_Source", (CHARACTERGUID)_Source)
THEN
LLWEAPONEX_Grimoire_DeathAura_OnCharacterDying(_Character, _Source);

IF
CharacterPrecogDying(_Target)
AND
DB_LLWEAPONEX_Grimoire_Death_Temp_ClaimedSoul(_Ghost, _DeadCharacter, _Target)
THEN
NOT DB_LLWEAPONEX_Grimoire_Death_Temp_ClaimedSoul(_Ghost, _DeadCharacter, _Target);
DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_DeadCharacter, _Target, "LLWEAPONEX_TORMENT_CLAIMSOUL");

IF
CharacterDied(_Character)
AND
DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_Source, _Character, "LLWEAPONEX_GRIMOIRE_DEATH_TORMENT_SOULBOMB")
THEN
NOT DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_Source, _Character, "LLWEAPONEX_GRIMOIRE_DEATH_TORMENT_SOULBOMB");
LLWEAPONEX_Statuses_CreateRevenant(_Character, _Source, "LLWEAPONEX_TormentedGhost_a3dba759-c3b6-4108-9b71-a7d5ccab9b1a", " (Ghost)", "LLWEAPONEX_TORMENTED_GHOST", 18.0, 0);

IF
CharacterDied(_Character)
AND
DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_Source, _Character, "LLWEAPONEX_GRIMOIRE_DEATH_TORMENT_BONUS")
THEN
NOT DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_Source, _Character, "LLWEAPONEX_GRIMOIRE_DEATH_TORMENT_BONUS");
LLWEAPONEX_Statuses_CreateRevenant(_Character, _Source, "LLWEAPONEX_TormentedGhost_a3dba759-c3b6-4108-9b71-a7d5ccab9b1a", " (Ghost)", "LLWEAPONEX_TORMENTED_GHOST", 18.0, 0);

IF
CharacterDied(_Character)
AND
DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_DeadCharacter, _Character, "LLWEAPONEX_TORMENT_CLAIMSOUL")
AND
CharacterIsDead(_DeadCharacter, 1)
THEN
NOT DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_DeadCharacter, _Character, "LLWEAPONEX_TORMENT_CLAIMSOUL");
CharacterResurrect(_DeadCharacter);

IF
CharacterDied(_Character)
AND
DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_Source, _Character, _Status)
THEN
NOT DB_LLWEAPONEX_Grimoire_Temp_DeathEvent(_Source, _Character, _Status);
//END_REGION

EXITSECTION
LLWEAPONEX_Grimoire_Death_ClearData();

ENDEXITSECTION
ParentTargetEdge "LLWEAPONEX_80_ToggledScripts"