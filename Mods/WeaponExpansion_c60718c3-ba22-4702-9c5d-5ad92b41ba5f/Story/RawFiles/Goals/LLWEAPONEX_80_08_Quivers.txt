Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION

IF
DB_CombatCharacters((CHARACTERGUID)_Player, _)
AND
DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill, _Status, _RechargeSpeed)
THEN
NOT DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill, _Status, _RechargeSpeed);
RemoveStatus(_Player, _Status);
DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill);

PROC
Proc_ObjectLeftCombat((CHARACTERGUID)_Player, _Combat)
AND
DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill)
AND
DB_LLWEAPONEX_Quivers_RechargeStatus(_Skill, _Status, _RechargeSpeed)
THEN
ApplyStatus(_Player, _Status, _RechargeSpeed, 0, _Player);
NOT DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill);
DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill, _Status, _RechargeSpeed);

PROC
Proc_ObjectLeftCombat((CHARACTERGUID)_Player, _Combat)
AND
ObjectGetFlag(_Player, "LLWEAPONEX_Quiver_DrewArrow", 1)
THEN
ObjectClearFlag(_Player, "LLWEAPONEX_Quiver_DrewArrow");
InventoryLaunchTagIterator(_Player, "LLWEAPONEX_Quiver_TemporaryArrow", "", "LLWEAPONEX_FoundQuiverArrow", "");

IF
CharacterStatusRemoved(_Player, _Status, _)
AND
DB_LLWEAPONEX_Quivers_Temp_RechargeAfterCombat(_Player, _Quiver, _Skill, _Status, _RechargeSpeed)
AND
ObjectExists(_Quiver, 1)
THEN
ItemAddCharges(_Quiver, 1);
LLWEAPONEX_Quivers_ResetRechargeStatus(_Player, _Quiver, _Status, _RechargeSpeed);

EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LLWEAPONEX_80_ToggledScripts"